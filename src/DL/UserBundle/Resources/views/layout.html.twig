<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script   src="https://code.jquery.com/jquery-3.1.1.min.js"   integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="   crossorigin="anonymous"></script>
    {% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('bundles/DLFamilytreeBundle/css/base.css') }}" />
    {% endblock %}
</head>
<body>

    {% block nav %}

    <header>

        <h1 class="logo">
            <a href="{{ path('dl_familytree_default_index')}}">
                <img src="images/logo.png" alt="LOGO">
            </a>
        </h1>

        <nav class="main-menu">
            <ul>
                <li><a href="{{ path('dl_familytree_default_index')}}">Accueil</a></li>
                <li><a href="#">Arbres</a></li>

                {% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}

                <li><a href="{{ path('people') }}">Personnes</a></li>
                <li><a href="{{ path('relation') }}">Relations</a></li>
                <li><a href="{{ path('tree_view', {'id':1}) }}">Visuel</a></li>

                {% endif %}

            </ul>
        </nav>

        <div class="user-menu">
            <ul>

                {% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}

                <li>
                    Connecté en tant que {{ app.user.username }} |
                </li>
                <li class="user-option">
                    <span>Options</span>
                    <ul>
                        <li><a href="{{ path('fos_user_security_logout') }}">Déconnexion</a></li>
                        <li><a href="{{ path('user_profil')}}">Profil</a></li>

                        {% if is_granted('ROLE_ADMIN') %}

                        <li><a href="{{ path('user_index') }}">Utilisateurs</a></li>

                        {% endif %}

                    </ul>
                </li>

                {% else %}

                <li>
                    <a href="{{ path('fos_user_registration_register')}}">
                        Sign Up
                    </a>
                </li>
                <li>
                    <a href="{{ path('fos_user_security_login') }}">
                        Login
                    </a>
                </li>

                {% endif %}

            </ul>
        </div>

    </header>


    {% endblock %}
    <div>
        {% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}
        {{ 'layout.logged_in_as'|trans({'%username%': app.user.username}, 'FOSUserBundle') }} |
        <a href="{{ path('fos_user_security_logout') }}">
            {{ 'layout.logout'|trans({}, 'FOSUserBundle') }}
        </a>
        {% else %}
        <a href="{{ path('fos_user_security_login') }}">{{ 'layout.login'|trans({}, 'FOSUserBundle') }}</a>
        {% endif %}
    </div>

    {% if app.request.hasPreviousSession %}
    {% for type, messages in app.session.flashbag.all() %}
    {% for message in messages %}
    <div class="flash-{{ type }}">
        {{ message }}
    </div>
    {% endfor %}
    {% endfor %}
    {% endif %}

    <div>
        {% block fos_user_content %}

        {% endblock fos_user_content %}
    </div>
</body>
</html>
